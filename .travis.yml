language: java

jdk:
  - openjdk8

before_install:
  - chmod +x gradlew

after_success:
  - ./gradlew coveralls

before_deploy:
  # Set up git user name and tag this commit
  - git config --local user.name "Yun-Shan"
  - git config --local user.email "yunshan21st@qq.com"
  - export TRAVIS_TAG=0.0.1-alpha-build$TRAVIS_BUILD_NUMBER
  - git tag $TRAVIS_TAG
deploy:
  provider: releases
  api_key:
    secure: ${GITHUB_TOKEN}
  skip_cleanup: true
  file_glob: true
  file: "**/build/libs/*"
  overwrite: true
  prerelease: true
  on:
    repo: Yun-Shan/LMC-Core
    tags: true